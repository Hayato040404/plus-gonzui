<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クラス掲示板 - ログイン</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="login-container">
        <h2>クラス掲示板 ログイン</h2>
        <input type="text" id="username" placeholder="ユーザー名">
        <input type="password" id="password" placeholder="パスワード">
        <button onclick="login()">ログイン</button>
        <p id="error" style="color: red;"></p>
    </div>

    <script>
        // Cookieの取得関数
        function getCookie(name) {
            let match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            return match ? match[2] : null;
        }

        // すでにログインしている場合、自動ログイン
        if (getCookie("loggedIn") === "true") {
            window.location.href = 'home.html';
        }

        function login() {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            if (user === 'j1d2024' && pass === '20240401') {
                document.cookie = "loggedIn=true; max-age=" + (3 * 24 * 60 * 60) + "; path=/";
                window.location.href = 'home.html';
            } else {
                document.getElementById('error').innerText = 'ユーザー名またはパスワードが違います。';
            }
        }
    </script>
</body>
</html>
<div id="cookie-banner">
    本サイトではCookieを使用しています。続行する場合は「同意」をクリックしてください。
    <button onclick="acceptCookies()">同意</button>
</div>

<script>
    function acceptCookies() {
        document.cookie = "cookieConsent=true; max-age=" + (30 * 24 * 60 * 60) + "; path=/";
        document.getElementById("cookie-banner").style.display = "none";
    }

    window.onload = function() {
        if (!document.cookie.includes("cookieConsent=true")) {
            document.getElementById("cookie-banner").style.display = "block";
        }
    }
</script>
